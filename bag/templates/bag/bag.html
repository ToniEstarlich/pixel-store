{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5 pt-5">
  <h2>Your Shopping Bag</h2>
  {% if bag_items %}
    <ul class="list-group">
      {% for item in bag_items %}
      <li class="list-group-item d-flex align-items-center">
        <!-- Imagen del producto -->
        {% if item.product.image %}
          <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" width="60" height="60" class="mr-3">
        {% else %}
          <img src="{% static 'images/no-image.png' %}" alt="No image" width="60" height="60" class="mr-3">
        {% endif %}

        <!-- Detalles del producto -->
        <div class="flex-grow-1">
          <strong>{{ item.product.name }}</strong> ({{ item.size }}) x{{ item.quantity }}
        </div>
        <span>€{{ item.subtotal|floatformat:2 }}</span>
      </li>
      {% endfor %}
    </ul>
    <div class="text-right mt-3">
      <strong>Total: £{{ grand_total|floatformat:2 }}</strong>
    </div>
    <a href="{% url 'clear_bag' %}">Empty bag</a>
  {% else %}
    <p>Your bag is empty.</p>
  {% endif %}
</div>
{% endblock %}

